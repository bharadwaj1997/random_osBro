
Conversation opened. 2 messages. 1 message unread.

Skip to content
Using Gmail with screen readers
 
 
More 
1 of 185
 
(no subject)
Inbox
	x
Sami Ullah		7:47 PM (2 minutes ago)
​ main.cpp ​​ Makefile ​
Sami Ullah <sami.ullah2316@gmail.com>
	
Attachments7:49 PM (0 minutes ago)
		
to me
On Thu, May 28, 2015 at 7:47 PM, Sami Ullah <sami.ullah2316@gmail.com> wrote:

    ​
     main.cpp
    ​​
     Makefile
    ​

3 Attachments
Preview attachment main.cpp
[C++]
Preview attachment main.cpp
[C++]
Preview attachment Makefile
[Binary File]
	
Click here to Reply or Forward
0.89 GB (5%) of 15 GB used
Manage
Terms - Privacy
Last account activity: 0 minutes ago
Open in 2 other locations  Details
	
	
main.cpp

#include <broker/broker.hh>
#include <broker/endpoint.hh>
#include <broker/message_queue.hh>
#include <poll.h>
#include <iostream>
#include <unistd.h>

#include <osquery/sdk.h>

using namespace osquery;

int main()
{
    // Prints welcome message...
   /* int rv;
    std::cout << "Welcome ..." ;
    broker::init();
    broker::endpoint pc1("VM");
    pc1.listen(9999,"192.168.1.187");
  //  broker::endpoint pc2("VM");
   // pc2.peer("192.168.1.90",9999);
  //  broker::message_queue mq("Testing",pc2);
 //   pollfd pfd{mq.fd() ,POLLIN, 0};
    auto conn_status = pc1.incoming_connection_status().need_pop();
    for(auto cs : conn_status)
   {
        if(cs.status == broker::incoming_connection_status::tag::established)
        {
            std::cout<<"Connection Established\n";
            for(int i=0;i<5;i++)
            {
               try
                {
                     int x=11;
                    pc1.send("Testing",broker::message{"hi",45,x});
                }
               catch (...)
                {   
                    std::cout<<"Encountered ANd Error";
                    return 0;
                }
                usleep(1000000);
            }
        }
        else
        {
            std::cout<<"Error Sorry";
        }
    }
   //while(true)
    {
       
    }
   /*  rv=poll(&pfd, 1, 10000);
    if (rv == -1)
    {
        std::cout<< "Error..\n";
    }
    else if (rv == 0)
    {
    std::cout<<"Timeout occurred!  No data after 3.5 seconds.\n";
    } 
    else
    {
    for (auto& msg : mq.want_pop() )
    {
        std::cout << broker::to_string(msg);
    }*/
    
    return 0;
}

